# 2025NYPC
2025 Nexon NYPC CodeBattle

## **문제 설명**

버섯 게임을 끝낸 예티와 핑크빈은 이제 그란디스로 넘어와, 럭키 다이스 스킬을 쓰며 주사위를 던지던 과거를 회상하며 Yacht Auction이라는 보드게임을 하기로 했습니다.

## **경기 규칙**

- 한 경기는 13번의 라운드로 이루어집니다.
- 각 라운드는 **입찰** 단계와 **점수 획득** 단계로 이루어집니다.
    - 예외적으로, 첫번째 라운드에서는 **점수 획득** 단계를 진행하지 않고, 마지막인 13번째 라운드에서는 **입찰** 단계를 진행하지 않습니다.

### **입찰 단계**

입찰 단계는 다음과 같이 진행됩니다.

1. *A*묶음 주사위 5개와 *B*묶음 주사위 5개를 굴립니다. 각 주사위는 1이상 6이하의 정수가 동일한 확률로 서로 독립적으로 나오는 주사위입니다.
2. 각 사람은 자신이 가져가고 싶은 주사위 묶음 *A* 혹은 *B*와 입찰에 사용할 0 이상 100,000 이하의 입찰 점수를 제출합니다.
3. 제출한 주사위 묶음과 입찰 점수를 통해 다음 규칙에 따라 주사위를 가져갑니다.
    - 서로 가져가고 싶은 주사위 묶음이 다른 경우 각자가 원하는 주사위 묶음을 가져갑니다.
    - 서로 가져가고 싶은 주사위 묶음이 같은 경우 더 높은 점수를 제출한 사람이 해당 묶음을 가져갑니다.
    - 만약 제출한 묶음과 입찰 점수가 모두 같다면 주사위를 가져가는 사람을 무작위로 정합니다. 각 사람이 선택될 확률은 같으며, 매 시행은 독립입니다.
4. 이후 다음 규칙에 따라 점수를 계산합니다.
    - 자신이 가져가고 싶은 주사위 묶음을 가져간 경우, 입찰 점수만큼 **점수를 잃습니다**.
    - 자신이 가져가고 싶은 주사위 묶음을 가져가지 못한 경우, 입찰 점수만큼 **점수를 얻습니다**.

### **점수 획득 단계**

가지고 있는 주사위 1010개(단, 마지막 점수 획득 단계에서는 55개)의 주사위 중 원하는 주사위를 55개 선택합니다. 이후, 다음 **점수 규칙**중 하나를 정해서 점수를 얻습니다. 한 경기에서 한 종류의 점수 규칙은 최대 한 번만 사용할 수 있습니다.

### **기본 점수 규칙**

- **`ONE`**: 1이 나온 주사위에 적힌 수의 합×**1000점**
- **`TWO`**: 2가 나온 주사위에 적힌 수의 합×**1000점**
- **`THREE`**: 3이 나온 주사위에 적힌 수의 합×**1000점**
- **`FOUR`**: 4가 나온 주사위에 적힌 수의 합×**1000점**
- **`FIVE`**: 5가 나온 주사위에 적힌 수의 합×**1000점**
- **`SIX`**: 6이 나온 주사위에 적힌 수의 합×**1000점**

또한, 기본 점수 규칙에서 63000점 이상을 얻은 경우 **보너스 점수 35000점**을 추가로 얻게 됩니다.

### **조합 점수 규칙**

- **`CHOICE`**: **다섯 개의 주사위에 적힌 모든 수의 합**×**1000점**
- **`FOUR_OF_A_KIND`**: 같은 수가 적힌 주사위가 4개 있다면, **다섯 개의 주사위에 적힌 모든 수의 합**×**1000점**. 없을 경우 **0점**
- **`FULL_HOUSE`**: 3개의 주사위에 적힌 수가 서로 같고, 다른 2개의 주사위에 적힌 수도 서로 같으면 **다섯 개의 주사위에 적힌 모든 수의 합**×**1000점**, 아닐 경우 **0점**
- **`SMALL_STRAIGHT`**: 4개의 주사위에 적힌 수가 1234, 2345, 3456 중 하나로 연속되어 있을 때, **15000점**, 아닐 경우 **0점**
- **`LARGE_STRAIGHT`**: 5개의 주사위에 적힌 수가 12345, 23456 중 하나로 연속되어 있을 때, **30000점**, 아닐 경우 **0점**
- **`YACHT`**: 5개의 주사위에 적힌 수가 모두 같을 때 **50000점**, 아닐 경우 **0점**

### **최종 점수 및 승리 조건**

모든 라운드가 끝난 이후, 총점이 높은 사람이 승리합니다. 총점이 같다면 무승부입니다.

- 플레이어의 총점=기본 점수 규칙에 따른 점수+조합 점수 규칙에 따른 점수+입찰 점수플레이어의 총점=기본 점수 규칙에 따른 점수+조합 점수 규칙에 따른 점수+입찰 점수

## **입/출력 형식**

참가자의 프로그램은 한 줄씩 입력을 받아 각 명령에 따라 동작해야 합니다. 출력이 필요한 명령은 아래 표에서 빨간색으로 **시간 제한**과 함께 표시되어 있습니다. 이 시간 제한 안에 출력을 하지 못한 경우 시간 초과 (TLE) 판정을 받게 되며, 해당 게임에서 실격패 처리됩니다.

| **커맨드** | **입력 형식** | **설명** |
| --- | --- | --- |
| READY | **`READY`** | 입력 준비 완료를 의미하는 **`OK`**를 **3초** 이내에 출력해야 합니다. |
| ROLL | **`ROLL a₁a₂a₃a₄a₅ b₁b₂b₃b₄b₅`** | A그룹 주사위에 적힌 눈이 a1,⋯ ,a5, B그룹 주사위에 적힌 눈이 b1,⋯ ,b5임을 나타냅니다. 이후 **0.5초** 이내에 **`BID g x`**를 출력해야 합니다. 이는 *g* 묶음 주사위에 *x*점을 입찰한다는 의미입니다. *g*는 **`A`** 혹은 **`B`** 이며, *x*는 0 이상 100 000 이하의 정수여야 합니다. |
| GET | **`GET g g₀ x₀`** | 입찰 결과로 *g* 묶음 주사위를 가져갔음을 의미합니다. 상대는 *g*0 묶음에 *x* 점을 입찰했다는 의미입니다. |
| SCORE | **`SCORE`** | 점수 획득 단계를 시작한다는 의미입니다. 이후 **0.5초** 이내에 **`PUT c d₁d₂d₃d₄d₅`**를 출력해야합니다. 이는 가지고 있는 주사위 중 d1,⋯ ,d5를 점수 규칙 *c*를 사용해서 점수를 획득한다는 의미입니다. |
| SET | **`SET c d₁d₂d₃d₄d₅`** | 상대가 점수 획득 단계에서 가지고 있는 주사위 중 d1,⋯ ,d5를 점수 규칙 *c*를 사용해서 점수를 획득했다는 의미입니다. |
| FINISH | **`FINISH`** | 게임 종료를 알리는 명령입니다. 이 명령을 받으면 게임 진행 상황에 관계 없이 프로그램은 즉시 정상적으로 종료되어야 하며, 출력은 필요하지 않습니다. |

모든 명령어는 한 줄에 하나씩 입출력해야하며, 출력할 때는 개행문자를 출력한 뒤 버퍼를 flush해야합니다. 언어별로 버퍼를 flush하는 방법에 대해서는 각 언어의 공식 레퍼런스 문서와 예제 코드를 참고해 주세요.

**샘플 AI와의 대결**

| **배틀 번호** | **설명** |
| --- | --- |
| 1 | 제공된 예제 코드와 같은 동작을 수행합니다. |
| 2 | **입찰 단계**: 주사위 그룹의 합이 높은 쪽에 (두 그룹 주사위 합의 차) ×1 000×1000점을 입찰합니다.**점수 획득 단계**: 제일 높은 점수를 받을 수 있는 규칙과 조합을 사용합니다. |
| 3 | **입찰 단계**: A와 B중 한 그룹을 골라 무작위로 00점을 입찰합니다.**점수 획득 단계**: 제일 높은 점수를 받을 수 있는 규칙과 조합을 사용합니다. |
| 4 | **입찰 단계**: A와 B중 한 그룹을 골라 무작위로 0점을 입찰합니다.**점수 획득 단계**: 점수를 얻기 힘든 조합을 우선 선택합니다. |
| 5 | **입찰 단계**: A와 B중 한 그룹을 골라 무작위로 0점을 입찰합니다.**점수 획득 단계**: 기본 점수 규칙을 우선 선택합니다. |
| 6 | **입찰 단계**: 더 좋은 조합에 수비적으로 입찰합니다.**점수 획득 단계**: 기본 점수 규칙을 우선 선택합니다. |
| 7 | **입찰 단계**: 더 좋은 조합에 공격적으로 입찰합니다.**점수 획득 단계**: 기본 점수 규칙을 우선 선택합니다. |
| 8 | **입찰 단계**: A와 B중 한 그룹을 골라 무작위로 0점을 입찰합니다.**점수 획득 단계**: 조합 점수 규칙을 우선 선택합니다. |
| 9 | **입찰 단계**: 더 좋은 조합에 수비적으로 입찰합니다.**점수 획득 단계**: 조합 점수 규칙을 우선 선택합니다. |
| 10 | **입찰 단계**: 더 좋은 조합에 공격적으로 입찰합니다.**점수 획득 단계**: 조합 점수 규칙을 우선 선택합니다. |

사용 기능

- 휴리스틱(간편추론)
- 강화 학습
    - 최적화된 휴리스틱 및 자체 대결을 통해 학습

진행

- 각자 게임을 플레이하여 게임에 대한 이해도를 쌓기
- 전략 공유 및 역할 분담(이강산 - 입찰 전략 구체화, 서정인 - 간단한 휴리스틱 제작)
- 제작된 휴리스틱과 입찰 전략을 통한 휴리스틱 모델 제작
- 1차 목표 : 모든 유형의 상대 AI에 대응이 가능한 통합 전략 코드 작성
    - 강화학습 AI 모델과 휴리스틱으로 개별 작업 및 테스트
    - 한계점 : 휴리스틱만으로는 상대 AI의 모든 전략에 유연하게 대응할 수 없었고, 강화학습 AI는 불안정한 학습환경(불충분한 학습 전략 유형, 부정확한 학습 파라미터 등)으로 인한 성능 저하 현상 발생
- 2차 목표 : 휴리스틱 전략 변경, 강화학습 AI모델에 휴리스틱 알고리즘 혼용
    - 상대 AI모델에 맞춰 대응할 수 있는 맞춤형 휴리스틱 알고리즘 제작
    - 한계점 : 강화학습 모델의 성능 테스트와 학습을 번갈아 수행하며 충분한 학습 시간 확보 실패, 휴리스틱 알고리즘
- 3차 목표 : 제출 시간 마감으로 인한 전략 수정
    - 강화 학습 AI 개발을 포기하고 휴리스틱 알고리즘 단일 사용으로 전환, 전략 수정 및 강화
    - 한계점 : 단일 휴리스틱 전환 및 전략 변경 후 기본 최고 성적 3승에서 6승까지 성능 상승하였으나 모든 유형의 상대 AI에는 대응 실패.
- 최종 정리 : 단일 휴리스틱 전환 및 알고리즘 변경으로 6승까지 성능을 향상 시켰지만 다양한 다양한 샘플 AI의 전략에 모두 대응하지 못하였으며, 특히 공격적인 입찰 전략을 돌파하지 못하였다.
